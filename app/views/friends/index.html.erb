<div data-controller="categories">
  <%= render "shared/filters" %>
  <div class="container">
    <div class="cards">
        <% @friends.each do |friend| %>
        <%= link_to new_friend_booking_path(friend), class: "text-decoration-none" do%>
          <div class="card-product" id="cards">
          <% if friend.photo.attached? %>
            <%= cl_image_tag friend.photo.key, height: 300, width: 400, gravity: :face, crop: :fill %>
          <% else %>
            <img src="https://ca.slack-edge.com/T02NE0241-U05FR7JJYA3-6b713784cedc-512" />
            <% end %>
            <div class="card-product-infos">
              <h2><%= friend.name %></h2>
              <p data-categories-target="cards">Catégorie : <%= friend.category %></p>
              <p>Prix : <%= friend.price %> € </p>
              <p>Adresse : <%= friend.postal_address %></p>
            </div>
          </div>
          <% end %>
      <% end %>
    </div>
  </div>
  <div style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
    >
  </div>
</div>
